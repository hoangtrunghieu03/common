<div class="custom-datatable">

    <div id="batchDelete">

        <div class="table-responsive">

            <ngx-datatable class="bootstrap"
                [rows]="tableData ? tableData : []"
                [columns]="columnDef"
                [columnMode]="'force'"
                [headerHeight]="'auto'"
                [footerHeight]="tableData && tableData.length > 0 ? 50 : 0"
                [rowHeight]="'auto'"
                [limit]="limit"
                [selectionType]="haveCheckbox ? 'single' : null"
                #tables
                [selected]="selected"
                [selectionType]="SelectionType.checkbox"
                (select)="onSelect($event)"
                [scrollbarH]="castedScrollbarH"
                [messages]="{emptyMessage: emptyMessage}">

                <ng-container *ngIf="haveCheckbox">
                    <ngx-datatable-column
                        [width]="30"
                        [sortable]="false"
                        [canAutoResize]="false"
                        [draggable]="false"
                        [resizeable]="false" name="">
                        <ng-template
                            ngx-datatable-header-template
                            let-value="value"
                            let-allRowsSelected="allRowsSelected"
                            let-selectFn="selectFn">
                            <input type="checkbox"
                                [checked]="allRowsSelected"
                                (change)="selectFn(!allRowsSelected)" />
                        </ng-template>
                        <ng-template
                            ngx-datatable-cell-template
                            let-value="value"
                            let-isSelected="isSelected"
                            let-onCheckboxChangeFn="onCheckboxChangeFn">
                            <input type="checkbox"
                                [checked]="isSelected"
                                (change)="onCheckboxChangeFn($event)" />
                        </ng-template>
                    </ngx-datatable-column>
                </ng-container>

                <ngx-datatable-column
                    *ngFor="let col of columnDef"
                    [prop]="col.prop"
                    [width]='col.width'>
                    <ng-template
                        let-column="column"
                        let-sort="sortFn"
                        ngx-datatable-header-template>
                        <div [style]="col.styleHeader">
                            <span class="mobile-hidden">{{col.name}}</span>
                        </div>
                    </ng-template>
                    <ng-template
                        let-value="value"
                        ngx-datatable-cell-template
                        let-row='row'>
                        <div [style]="col.styleBody" (click)="onSelectRow(col, row)">
                            <span class="mobile-hidden" [ngClass]="{'text-highlight': col.router}" *ngIf="col.colType != 'innerHTML'; else inner">
                                {{
                                col.colType == "date" ? ( value | date : 'dd/MM/yyyy' )
                                : col.colType == "dateIso" ? ( value | date : 'dd/MM/yyyy' : "GMT" )
                                : col.colType == "money" ? ( value | currency:'VND':'symbol':null:'vi-VN')
                                : col.colType == "tel" ? ( formatPhoneNumber(value) )
                                : col.colType == "dateTime" ? ( value | date : 'dd/MM/yyyy HH:mm' : "GMT" )
                                : (value | replaceNull)
                                }}
                            </span>
                            <ng-template #inner>
                                <span [innerHTML]="value"></span>
                            </ng-template>
                        </div>
                    </ng-template>
                </ngx-datatable-column>

                <ngx-datatable-footer>
                    <ng-template
                        ngx-datatable-footer-template
                        let-rowCount="rowCount"
                        let-pageSize="pageSize"
                        let-selectedCount="selectedCount"
                        let-curPage="curPage"
                        let-offset="offset">
                        <div class="total-table">
                          <span>Tá»•ng<span class="font-weight-bold">&nbsp;{{ tableData.length }}</span></span>
                          <ng-container *ngIf="totalFooterShow && totalFooterShow.length > 0">
                            <span *ngFor="let totalValue of totalFooterShow">{{totalValue?.label}}<span class="font-weight-bold">&nbsp;{{totalValue?.value}}</span></span>
                          </ng-container>
                        </div>
                        <datatable-pager
                            [pagerLeftArrowIcon]="'datatable-icon-left'"
                            [pagerRightArrowIcon]="'datatable-icon-right'"
                            [pagerPreviousIcon]="'datatable-icon-prev'"
                            [pagerNextIcon]="'datatable-icon-skip'"
                            [page]="curPage" [size]="pageSize"
                            [count]="rowCount" [hidden]="!((rowCount / pageSize) > 1)"
                            (change)="tables.onFooterPage($event)">
                        </datatable-pager>
                    </ng-template>
                </ngx-datatable-footer>

            </ngx-datatable>

        </div>

    </div>

</div>
