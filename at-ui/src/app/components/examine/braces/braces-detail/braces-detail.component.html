<div class="container-fluid">
    <div class="card">
        <div class="card-header">
            <h5 class="d-flex justify-content-between align-items-center hide-arrow ">
                <h5>THÔNG TIN BỆNH NHÂN </h5>
                <div ngbDropdown class="d-inline-block" placement="bottom-right">
                    <button ngbDropdownToggle class="btn-icon m-0">
                        <at-feather-icons class="h-px-18" [icon]="'more-horizontal'"></at-feather-icons>
                    </button>
                    <div ngbDropdownMenu aria-labelledby="dropdownBasic1">
                        <button class="btn border-white" ngbDropdownItem (click)="onMedicalRecordDehiscent()">Bản tự khai</button>
                        <button class="btn border-white" ngbDropdownItem (click)="onConfirmMedicalRecordCommitment()">Thực hiện cam kết</button>
                    </div>
                </div>
            </h5>
        </div>
        <div class="card-body" [formGroup]="bracesForm">
            <at-customer-info [customer]="customerInfo" [medicalRecord]="medicalRecordData"></at-customer-info>
            <div class='tab2-card tab'>
                <ul ngbNav #nav="ngbNav" class="nav-tabs" [destroyOnHide]="false" [(activeId)]="active" (navChange)="onNavChange($event)">
                    <li ngbNavItem [destroyOnHide]="true" [ngbNavItem]="1">
                        <a ngbNavLink>Bệnh án</a>
                        <ng-template ngbNavContent>
                            <at-braces-patient [medicalRecordData]="medicalRecordData"
                            (eventChangeTab)="onChangeTab($event)">
                        </at-braces-patient>
                        </ng-template>
                    </li>
                    <li ngbNavItem [destroyOnHide]="true" [ngbNavItem]="2">
                        <a ngbNavLink>Hình ảnh</a>
                        <ng-template ngbNavContent>
                            <at-pickture [medicalRecord]="medicalRecordData" [screenImage]="screenImage.examine"></at-pickture>
                        </ng-template>
                    </li>
                    <li ngbNavItem [destroyOnHide]="true" [ngbNavItem]="3">
                        <a ngbNavLink>Chỉ định dịch vụ</a>
                        <ng-template ngbNavContent>
                            <at-service footerAction 
                                [medicalRecordData]="medicalRecordData"
                                [medicalDesignatData]="medicalRecordData?.medicalServiceIndicates"
                                [medicalServiceData]="medicalRecordData.medicalServices" 
                                (eventChangeTab)="onChangeTab($event)">
                            </at-service>
                                <!-- [_servicePriceColDef]="serviceColdef" -->
                        </ng-template>
                    </li>
                    <li ngbNavItem [destroyOnHide]="true" [ngbNavItem]="4">
                        <a ngbNavLink>Quá trình điều trị</a>
                        <ng-template ngbNavContent>
                            <at-treatment 
                                [medicalRecordData]="medicalRecordData">
                            </at-treatment>
                        </ng-template>
                    </li>
                    <li ngbNavItem [destroyOnHide]="true">
                        <a ngbNavLink>Thu phí</a>
                        <ng-template ngbNavContent>
                            <at-fee [medicalRecord]="medicalRecordData"></at-fee>
                        </ng-template>
                    </li>
                </ul>
                <div [ngbNavOutlet]="nav"></div>
            </div>
        </div>
    </div>
    <at-examina-footer (eventCancel)="onBackClick()" currentRoom="Niềng răng" #ftA>
        <button class="btn btn-primarys m-l-12 move-room m-t-5 hide_lt-md" (click)="onHandleMoveRoom(ftA)">chuyển phòng</button>
        <button class="btn btn-primarys m-r-12" (click)="onExaminationFinish()">hoàn thành khám</button>

        <ng-container class="mobile">
            <button ngbDropdownItem (click)="onHandleMoveRoom(ftA)">Chuyển phòng</button>
            <button ngbDropdownItem (click)="onExaminationFinish()">Hoàn thành khám</button>
        </ng-container>
    </at-examina-footer>
</div>